<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>My Project: mega_comm_task Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmega__comm__task-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mega_comm_task Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="mega__comm__task_8h_source.html">mega_comm_task.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for mega_comm_task:</div>
<div class="dyncontent">
<div class="center"><img src="classmega__comm__task__inherit__graph.png" border="0" usemap="#mega__comm__task_inherit__map" alt="Inheritance graph"/></div>
<!-- MAP 0 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for mega_comm_task:</div>
<div class="dyncontent">
<div class="center"><img src="classmega__comm__task__coll__graph.png" border="0" usemap="#mega__comm__task_coll__map" alt="Collaboration graph"/></div>
<!-- MAP 1 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1a3a2dc1e6d669bebba0970711075667"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmega__comm__task.html#a1a3a2dc1e6d669bebba0970711075667">mega_comm_task</a> (const char *a_name, unsigned portBASE_TYPE a_priority=0, size_t a_stack_size=configMINIMAL_STACK_SIZE, emstream *p_ser_dev=NULL, uint16_t baud=9600, uint8_t port=0, communication_data *comm_data_in=NULL)</td></tr>
<tr class="memdesc:a1a3a2dc1e6d669bebba0970711075667"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor for a <a class="el" href="classmega__comm__task.html">mega_comm_task</a> object communicates with the Rasp-Pi.  <a href="#a1a3a2dc1e6d669bebba0970711075667">More...</a><br /></td></tr>
<tr class="separator:a1a3a2dc1e6d669bebba0970711075667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a138a230db5d3c9362b977e4777af6165"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmega__comm__task.html#a138a230db5d3c9362b977e4777af6165">run</a> ()</td></tr>
<tr class="memdesc:a138a230db5d3c9362b977e4777af6165"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the code for the ATMega64 to transmit and receive data from the Raspberry Pi This method runs on an infinite loop where data is read via an RS232 port from the raspberry pi. The data, which contains information regarding different desired values from the user and control loop, is then relayed to each of the different tasks within the ATMega, so that each task can act accordingly. In addition, this method sends information back to the Raspberry Pi about the actual state of each of the tasks in the ATMega.  <a href="#a138a230db5d3c9362b977e4777af6165">More...</a><br /></td></tr>
<tr class="separator:a138a230db5d3c9362b977e4777af6165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb741c63ba06af3870a26889f4f4f4e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmega__comm__task.html#abb741c63ba06af3870a26889f4f4f4e6">read_from_pi</a> ()</td></tr>
<tr class="memdesc:abb741c63ba06af3870a26889f4f4f4e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads data from the raspberry pi through one of the USART ports of the ATMega. Since this class descents the rs232int class, it is able to use its communication based methods for talking with the Raspberry Pi.  <a href="#abb741c63ba06af3870a26889f4f4f4e6">More...</a><br /></td></tr>
<tr class="separator:abb741c63ba06af3870a26889f4f4f4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf150bee11df6ad351ebc06328a87155"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmega__comm__task.html#abf150bee11df6ad351ebc06328a87155">write_to_pi</a> ()</td></tr>
<tr class="memdesc:abf150bee11df6ad351ebc06328a87155"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data to the raspberry pi through one of the USART ports of the ATMega. Since this class descents the rs232int class, it is able to use its communication based methods for talking with the Raspberry Pi.  <a href="#abf150bee11df6ad351ebc06328a87155">More...</a><br /></td></tr>
<tr class="separator:abf150bee11df6ad351ebc06328a87155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63bc85730a7b93c3240502979cd1c3b9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a63bc85730a7b93c3240502979cd1c3b9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmega__comm__task.html#a63bc85730a7b93c3240502979cd1c3b9">write_16bit_val</a> (int16_t write_val)</td></tr>
<tr class="memdesc:a63bc85730a7b93c3240502979cd1c3b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">writes a 16 bit value to the rs232 port. This function is implemented using calls to the rs232 class getchar, along with some bitshifting to get a final value <br /></td></tr>
<tr class="separator:a63bc85730a7b93c3240502979cd1c3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04be72195bd2071fe1eb51b2ac5bbe1f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a04be72195bd2071fe1eb51b2ac5bbe1f"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmega__comm__task.html#a04be72195bd2071fe1eb51b2ac5bbe1f">read_16bit_val</a> ()</td></tr>
<tr class="memdesc:a04be72195bd2071fe1eb51b2ac5bbe1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">reads a 16 bit balue from the rs232 port. This function is implemented using calls to the rs232 class getchar, along with some bitshifting to get a final value <br /></td></tr>
<tr class="separator:a04be72195bd2071fe1eb51b2ac5bbe1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Created by nate furbeyre on 11/18/18. The <a class="el" href="classmega__comm__task.html">mega_comm_task</a> task is responsible for receiving information from the raspberry pi and relaying the necessary information to each of the tasks controlled by the ATMega64. In addition, it sends information back to the Raspberry Pi about different states of tasks on the ATMega. It uses the rs232 communication protocol and the UART/ USART ports on the ATMega. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1a3a2dc1e6d669bebba0970711075667"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mega_comm_task::mega_comm_task </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>a_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned portBASE_TYPE&#160;</td>
          <td class="paramname"><em>a_priority</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>a_stack_size</em> = <code>configMINIMAL_STACK_SIZE</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">emstream *&#160;</td>
          <td class="paramname"><em>p_ser_dev</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>baud</em> = <code>9600</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>port</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">communication_data *&#160;</td>
          <td class="paramname"><em>comm_data_in</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The constructor for a <a class="el" href="classmega__comm__task.html">mega_comm_task</a> object communicates with the Rasp-Pi. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a_name</td><td>the name of the task </td></tr>
    <tr><td class="paramname">a_priority</td><td>The priority given to this task </td></tr>
    <tr><td class="paramname">a_stack_size</td><td>The amount of bytes given to the task </td></tr>
    <tr><td class="paramname">p_ser_dev</td><td>A serial device that this tasks output is sent to </td></tr>
    <tr><td class="paramname">baud</td><td>The baud rate for the UART port that the mega communicates with </td></tr>
    <tr><td class="paramname">port</td><td>The UART port number </td></tr>
    <tr><td class="paramname">semi_data_in</td><td>A pointer to the semi truck system data communicated between tasks </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="abb741c63ba06af3870a26889f4f4f4e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mega_comm_task::read_from_pi </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads data from the raspberry pi through one of the USART ports of the ATMega. Since this class descents the rs232int class, it is able to use its communication based methods for talking with the Raspberry Pi. </p>
<p>if the other device writes all data atomically, then we can read all data (also atomically) </p>

</div>
</div>
<a class="anchor" id="a138a230db5d3c9362b977e4777af6165"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mega_comm_task::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs the code for the ATMega64 to transmit and receive data from the Raspberry Pi This method runs on an infinite loop where data is read via an RS232 port from the raspberry pi. The data, which contains information regarding different desired values from the user and control loop, is then relayed to each of the different tasks within the ATMega, so that each task can act accordingly. In addition, this method sends information back to the Raspberry Pi about the actual state of each of the tasks in the ATMega. </p>
<p>receive data from pi and relay to tasks</p>
<p>send data about tasks to the pi </p>

</div>
</div>
<a class="anchor" id="abf150bee11df6ad351ebc06328a87155"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mega_comm_task::write_to_pi </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes data to the raspberry pi through one of the USART ports of the ATMega. Since this class descents the rs232int class, it is able to use its communication based methods for talking with the Raspberry Pi. </p>
<p>an ugly way to do this is through bitshifting... </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="mega__comm__task_8h_source.html">mega_comm_task.h</a></li>
<li>mega_comm_task.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
